<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Assets</title>
	<link rel="stylesheet" type="text/css" href="assets/css/bootstrap.min.css">
	<link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="<?php echo base_url();?>assets/css/styles.css">

	<script type="text/javascript" src="<?php echo base_url();?>assets/js/jquery-3.2.1.min.js"></script>
	<script type="text/javascript" src="<?php echo base_url();?>assets/js/popper.min.js"></script>
	<script type="text/javascript" src="<?php echo base_url();?>assets/js/bootstrap.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
</head>
<body>
<div class="row">
	<nav class="col-md-3 d-none d-md-block bg-light sidebar">
		<div class="sidebar-sticky">
			<a href="#" class="navbar-brand">Hygeieia NW Calc</a>
			<hr>			
			<ul class="nav-flex-column">
				<li class="nav-item">
					<a href="#" class="nav-link">
						<svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M30 15C30 6.72919 23.2708 0 15 0C12.4069 0 9.88064 0.671613 7.64081 1.93548H5.80645V0H2.90323V6.13887C1.00645 8.72274 0 11.7808 0 15C0 23.2713 6.72919 30 15 30C16.8431 30 18.6421 29.6685 20.3477 29.0173C21.3213 29.6361 22.4729 30 23.7097 30C25.2184 30 26.6777 29.4576 27.8187 28.4729L27.1863 27.7403C26.221 28.5735 24.9866 29.0323 23.7097 29.0323C20.775 29.0323 18.3871 26.6444 18.3871 23.7097C18.3871 20.775 20.775 18.3871 23.7097 18.3871C26.6444 18.3871 29.0323 20.775 29.0323 23.7097C29.0323 24.9363 28.6268 26.0894 27.8589 27.044L28.6132 27.6508C29.5074 26.5384 30 25.139 30 23.7097C30 22.4719 29.6356 21.3203 29.0163 20.3463C29.6671 18.6402 30 16.8431 30 15ZM7.74194 4.83871H8.70968V5.80645V11.6129H7.74194V4.83871ZM5.80645 2.90323H6.77419V3.87097V11.6129H5.80645V2.90323ZM3.87097 0.967742H4.83871V1.93548V11.6129H3.87097V0.967742ZM14.5161 29.0202C7.16323 28.769 1.23097 22.8368 0.979839 15.4839H14.5161V29.0202ZM14.5161 14.5161H0.987097C1.06597 12.1606 1.72016 9.90968 2.90323 7.90306V12.5806H4.83871H5.80645H6.77419H7.74194H8.70968H9.67742H10.6452H11.6129H13.5484V7.74194H11.6129V5.80645H9.67742V3.87097H7.74194V2.99613C9.78919 1.75548 12.1156 1.06694 14.5161 0.984677V14.5161ZM9.67742 11.6129V6.77419H10.6452V7.74194V11.6129H9.67742ZM11.6129 11.6129V8.70968H12.5806V11.6129H11.6129ZM29.0202 14.5161H24.8777L28.4361 10.9577C28.7777 12.0905 28.9781 13.2832 29.0202 14.5161ZM26.5819 7.08871L21.1776 12.4931L21.8618 13.1773L27.1118 7.92726C27.4873 8.5679 27.8129 9.24048 28.0848 9.94065L23.5094 14.5161H20.5229L21.1485 13.8905L20.4644 13.2063L19.1545 14.5161H16.1681L25.2518 5.43242C25.7347 5.95016 26.1803 6.50274 26.5819 7.08871ZM15.4839 0.979839C16.7168 1.02194 17.9095 1.22226 19.0423 1.56387L15.4839 5.12226V0.979839ZM15.4839 10.8455L21.3644 4.965L20.6802 4.28081L15.4839 9.4771V6.49064L20.0594 1.91516C20.7595 2.18661 21.4321 2.51226 22.0727 2.88823L21.2932 3.66774L21.9774 4.35194L22.9113 3.41806C23.4973 3.81968 24.0498 4.26484 24.5676 4.74823L15.4839 13.8319V10.8455ZM23.7097 17.4194C20.2413 17.4194 17.4194 20.2413 17.4194 23.7097C17.4194 25.5295 18.2008 27.166 19.44 28.3156C18.165 28.741 16.8387 28.9756 15.4839 29.0211V15.4839H29.0211C28.9756 16.8382 28.739 18.1635 28.3142 19.4385C27.1645 18.1998 25.5285 17.4194 23.7097 17.4194Z" fill="#6B4F81"/>
</svg> Overview
						<span class="sr-only">(current)</span>
					</a>
				</li>
				<li class="nav-item">
					<a href="<?php echo base_url();?>asset" class="nav-link">
						<svg width="29" height="30" viewBox="0 0 29 30" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M1.875 29.0625H4.6875C5.20453 29.0625 5.625 28.642 5.625 28.125V27.1875H16.2216C18.5766 27.1875 20.8777 26.5275 22.8745 25.2797C25.8853 23.3977 27.9661 20.3128 28.5834 16.8159L28.7869 15.6637C28.8778 15.1491 28.7377 14.6241 28.4016 14.2237C28.0655 13.8234 27.5728 13.5937 27.0502 13.5937C26.7647 13.5937 26.4928 13.6645 26.25 13.7883V11.7187H26.7187C26.9081 11.7187 27.0797 11.6044 27.1519 11.4295C27.2245 11.2542 27.1842 11.0527 27.0502 10.9186L23.3002 7.16859C23.1169 6.98531 22.8206 6.98531 22.6373 7.16859L21.5625 8.24344V1.875C21.5625 1.61625 21.353 1.40625 21.0937 1.40625H16.4062C16.147 1.40625 15.9375 1.61625 15.9375 1.875V7.03125H14.0381C13.6814 6.24656 13.4175 5.78765 13.2056 5.5214L14.3902 2.6264C14.5219 2.31 14.445 1.95422 14.1942 1.72031C13.9434 1.48594 13.583 1.43484 13.2769 1.58765L12.3905 2.03062L11.8322 1.28625C11.6911 1.09781 11.4755 0.979685 11.2406 0.96281C11.0053 0.945466 10.7752 1.03125 10.6069 1.19859L9.89391 1.91109L9.42562 1.28625C9.28406 1.09734 9.06844 0.979685 8.83312 0.96281C8.59828 0.945466 8.36719 1.03172 8.20031 1.19859L7.30078 2.09812L5.94891 1.71187C5.63156 1.62094 5.29641 1.72875 5.09156 1.98515C4.88625 2.24156 4.85484 2.59359 5.01188 2.88094L6.42937 5.49797C5.43422 6.39703 4.21875 8.92312 4.21875 11.2186V12.6562C4.21875 14.2073 5.48016 15.4687 7.03125 15.4687H12.1875H16.4062H20.1562H25.0228L24.0328 17.4492L21.4552 18.5541C21.1659 17.587 20.2786 16.875 19.2187 16.875H12.4702C10.0308 16.875 7.68375 17.5472 5.625 18.8184V17.8125C5.625 17.2955 5.20453 16.875 4.6875 16.875H1.875C1.35797 16.875 0.9375 17.2955 0.9375 17.8125V28.125C0.9375 28.642 1.35797 29.0625 1.875 29.0625ZM7.11422 3.02015C7.39781 3.10125 7.70391 3.0225 7.91203 2.81344L8.76187 1.96359L9.23062 2.58937C9.37266 2.77781 9.58875 2.89594 9.82406 2.91234C10.0622 2.92781 10.2891 2.8425 10.4555 2.67609L11.1684 1.96359L11.7033 2.67609C11.9381 2.99109 12.3637 3.09234 12.7167 2.91609L13.3987 2.57484L12.3412 5.15625H11.0709L11.6691 3.95953L10.8305 3.54L10.0228 5.15625H9.20109L8.54766 3.79687L7.7025 4.20328L8.16047 5.15625H7.31016L5.9775 2.69531L7.11422 3.02015ZM11.7187 7.5V14.5312H7.03125C5.99719 14.5312 5.15625 13.6903 5.15625 12.6562V11.2186C5.15625 8.70937 6.70922 6.36937 7.15359 6.09375H12.4631C12.5391 6.18562 12.7111 6.43219 13.0022 7.03125H12.1875C11.9283 7.03125 11.7187 7.24125 11.7187 7.5ZM12.6562 7.96875H15.9375V14.5312H12.6562V7.96875ZM22.9687 8.16281L25.5872 10.7812H20.3503L22.9687 8.16281ZM16.875 2.34375H20.625V9.18094L18.8873 10.9186C18.7533 11.0527 18.713 11.2542 18.7856 11.4295C18.8578 11.6044 19.0294 11.7187 19.2187 11.7187H19.6875V14.5312H16.875V2.34375ZM20.625 11.7187H25.3125V14.5312H24.375V12.6562C24.375 12.3975 24.1655 12.1875 23.9062 12.1875H22.0312C21.772 12.1875 21.5625 12.3975 21.5625 12.6562V14.5312H20.625V11.7187ZM23.4375 14.5312H22.5V13.125H23.4375V14.5312ZM12.4702 17.8125H19.2187C19.9941 17.8125 20.625 18.4434 20.625 19.2187C20.625 19.9941 19.9941 20.625 19.2187 20.625H11.7187V21.5625H19.2187C20.4005 21.5625 21.3708 20.6803 21.5297 19.5417L24.5592 18.2433C24.6614 18.1997 24.7448 18.1214 24.7941 18.022L26.3109 14.9878C26.4525 14.7061 26.7352 14.5312 27.0502 14.5312C27.2948 14.5312 27.5259 14.6386 27.6834 14.8266C27.8409 15.0145 27.907 15.2602 27.8644 15.5011L27.6609 16.6533C27.0895 19.8891 25.1644 22.7433 22.3777 24.4847C20.5298 25.6397 18.4012 26.25 16.2216 26.25H5.625V19.9397C7.64953 18.5512 10.0092 17.8125 12.4702 17.8125ZM1.875 17.8125H4.6875L4.68797 28.125H1.875V17.8125Z" fill="#6B4F81" fill-opacity="0.5"/>
</svg>
 							Assets
					</a>
				</li>
				<li class="nav-item">
					<a href="<?php echo base_url();?>liabilities" class="nav-link">
						<svg width="26" height="29" viewBox="0 0 26 29" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M8.7813 0.9375H24.7188C24.8431 0.9375 24.9624 0.986885 25.0503 1.07479C25.1382 1.1627 25.1876 1.28193 25.1876 1.40625V12.6562C25.1876 12.7806 25.1382 12.8998 25.0503 12.9877C24.9624 13.0756 24.8431 13.125 24.7188 13.125H19.1247C19.0253 13.4435 18.9089 13.7565 18.776 14.0625H21.4376V15H18.3049C17.1274 17.0271 15.2357 18.5418 13.0001 19.2473V21.0938C13.0001 21.2181 12.9507 21.3373 12.8628 21.4252C12.7749 21.5131 12.6556 21.5625 12.5313 21.5625H10.6563V22.2656C10.6563 22.4521 10.7304 22.6309 10.8622 22.7628C10.9941 22.8947 11.1729 22.9688 11.3594 22.9688H19.7969C20.232 22.9688 20.6493 23.1416 20.957 23.4493C21.2647 23.757 21.4376 24.1743 21.4376 24.6094C21.4376 25.0445 21.2647 25.4618 20.957 25.7695C20.6493 26.0771 20.232 26.25 19.7969 26.25H7.14068C6.9542 26.25 6.77535 26.3241 6.64349 26.4559C6.51163 26.5878 6.43755 26.7666 6.43755 26.9531C6.43755 27.1396 6.51163 27.3184 6.64349 27.4503C6.77535 27.5822 6.9542 27.6562 7.14068 27.6562H17.2188V28.5938H7.14068C6.70556 28.5937 6.28826 28.4209 5.98058 28.1132C5.6729 27.8055 5.50005 27.3882 5.50005 26.9531C5.50005 26.518 5.6729 26.1007 5.98058 25.793C6.28826 25.4854 6.70556 25.3125 7.14068 25.3125H19.7969C19.9834 25.3125 20.1623 25.2384 20.2941 25.1066C20.426 24.9747 20.5001 24.7959 20.5001 24.6094C20.5001 24.4229 20.426 24.2441 20.2941 24.1122C20.1623 23.9803 19.9834 23.9062 19.7969 23.9062H11.3594C10.9243 23.9062 10.507 23.7334 10.1993 23.4257C9.89165 23.118 9.7188 22.7007 9.7188 22.2656V21.5625H7.8438C7.71948 21.5625 7.60025 21.5131 7.51235 21.4252C7.42444 21.3373 7.37505 21.2181 7.37505 21.0938V19.2553C5.38362 18.6299 3.658 17.3575 2.47192 15.64C1.28583 13.9224 0.707199 11.8579 0.827792 9.77408C0.948385 7.69025 1.7613 5.70634 3.1376 4.13703C4.5139 2.56773 6.37477 1.50288 8.42505 1.11141C8.46784 1.05783 8.522 1.01444 8.58361 0.984364C8.64522 0.954287 8.71275 0.93828 8.7813 0.9375ZM9.25005 9.84375H24.2501V8.90625H9.25005V9.84375ZM9.25005 1.875V7.96875H24.2501V1.875H9.25005ZM24.2501 10.7812H9.25005V12.1875H24.2501V10.7812ZM8.31255 20.625H12.0626V19.4897C10.8265 19.7504 9.54987 19.7535 8.31255 19.4986V20.625ZM1.75005 10.3125C1.75045 12.1223 2.33276 13.884 3.411 15.3376C4.48925 16.7911 6.0063 17.8594 7.73817 18.3848C9.47004 18.9102 11.3249 18.8648 13.029 18.2553C14.7331 17.6458 16.1961 16.5046 17.2019 15H12.0626V14.0625H17.7415C17.894 13.7585 18.0277 13.4454 18.1418 13.125H8.7813C8.65698 13.125 8.53775 13.0756 8.44985 12.9877C8.36194 12.8998 8.31255 12.7806 8.31255 12.6562V2.09062C6.44478 2.50669 4.77548 3.54902 3.58176 5.04458C2.38805 6.54014 1.74171 8.39897 1.75005 10.3125Z" fill="#6B4F81" fill-opacity="0.5"/>
</svg>
							Liabilities
					</a>
				</li>
			</ul>
		</div>

		</nav>
	<main class="col-md-6 ml-sm-auto col-lg-6 px-4">
		<h2 style="text-align: center;">Overview</h2>
		<hr>
		<div class="container">
			<h4 class="text-left">Add Your Current Assets</h4>
			<div class="alert-box">
					
          </div>
                <div class="spinner-border text-primary text-center" role="status">
            <span class="sr-only">Signing you up...</span>
            </div>
				<form class="form-inline">
					<div class="form-group mb-2">
					<input class="form-control" type="text" id="asset_name" name="asset_name" placeholder="Asset Name">
					</div>
					<div class="form-group mb-2">
					<input class="form-control" type="number" id="asset_value" name="asset_value" placeholder="Asset Value">
					</div>
					<input type="submit" class="btn btn-primary mb-2" id="add" value="ADD" name="">
				</form>
			<h3 id="netassets"><span class="h-text">Total Asset Value </span><span class="naira">N</span><span class="figure"><?=$total_asset?></span></h3>
			<table id="valueTable" class="table">
				<thead>
					<tr>
					<th class="top" scope="col">Items</th>
					<th class="top" scope="col">Value</th>
					<th class="top" scope="col">Date</th>	
					</tr>

				</thead>
				<tbody>
				<?php if (!empty($assets)): ?>
				<?php foreach ($assets as $asset): ?>
					<tr>
						<td><?=$asset['asset_name']?></td>
						<td><?=$asset['asset_value']?></td>
						<td><?=$asset['date']?></td>
						<td>
						<form action="<?php echo base_url();?>asset/remove_asset" method="POST">
						<input type="text" hidden name="asset_name"  value="<?=$asset['asset_name']?>">
						<button class="btn btn-danger" id="<?=$asset['asset_name']?>">DELETE</button>
						</form>
						
						</td>

					</tr>
					<?php endforeach; ?>
					<?php else: ?>
					<p>You have no assets yet</p>
					<?php endif; ?>
				</tbody>
			</table>
		</div>
		

	</main>

	<nav class="col-md-3 d-none d-md-block sidebar">
		<div class="sidebar-sticky nav-right">
			<img src="assets/img/avatar.svg">
			<h3><?php echo $name?></h3>
			<p><?php echo $email?></p>
			<p><a href="<?php base_url();?>auth/logout">Logout</a></p>
			<hr>			
			<p>Summary</p>
			<p class="summaryText">Assets <span class="text-right"><?=$asset_count?></span></p>
			<p style="color:#6B4F81" class="summaryText">Liabilities<span class="text-right"><?=$liability_count?></span> </p>

		</div>
			<img id="live-chat" src="<?php base_url();?>assets/img/live-chat.svg">
		</nav>

	</div>

</body>
</html>


<script>
		$(document).ready(()=>{
			$('.spinner-border').hide();
		})

		$('#add').on('click',()=>{

			$('form').on('submit',(e)=>{
			e.preventDefault();
			
			$.ajax({
				type:'POST',
				url:'<?php echo base_url();?>asset/add_asset',
				dataType:'text',
				data:{
					asset_name:$('#asset_name').val(),
					asset_value:$('#asset_value').val()
				},
				beforeSend:()=>{
					$('.spinner-border').show();
					$('form').hide();
					$('.alert-box').html('');
					console.log($('form').val());
				},
				
				success:(data)=>{
					//console.log(data);
					function succession(){
						let result=JSON.parse(data);
						$('.spinner-border').hide();
						
						
						if(result['success'] !== ''){
							$('form').show();
							$('.alert-box').html('<div class="alert alert-success" role="alert">'+result['success']+'</div>');
							location.reload();
						}else{
							$('form').show();
							$('.alert-box').html('<div class="alert alert-danger" role="alert">'+result['error']+'</div>');
						}
					}
					setTimeout(succession,3000);
					
				},
				error:(err)=>{
					$('.spinner-border').hide();
					$('form').show();
					console.log(err);
				}
			})
		
		})



		})
		



// 	$('.btn-danger').on('click',()=>{

// 		$('form').on('submit',(e)=>{
// 		e.preventDefault();

// 		$.ajax({
// 			type:'POST',
// 			url:'<?php echo base_url();?>asset/remove_asset',
// 			dataType:'text',
// 			data:$('form').serialize(),
// 			beforeSend:()=>{
// 				$('.spinner-border').show();
// 				$('form').hide();
// 				$('.alert-box').html('');
// 			},
			
// 			success:(data)=>{
// 				//console.log(data);
// 				function succession(){
// 					let result=JSON.parse(data);
// 					$('.spinner-border').hide();
					
					
// 					if(result['success'] !== ''){
// 						$('form').show();
// 						$('.alert-box').html('<div class="alert alert-success" role="alert">'+result['success']+'</div>');
// 						location.reload();
// 					}else{
// 						$('form').show();
// 						$('.alert-box').html('<div class="alert alert-danger" role="alert">'+result['error']+'</div>');
// 					}
// 				}
// 				setTimeout(succession,3000);
				
// 			},
// 			error:(err)=>{
// 				$('.spinner-border').hide();
// 				$('form').show();
// 				console.log(err);
// 			}
// 		})

// 		})



// })
</script>
